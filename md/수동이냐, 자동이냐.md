# 수동 등록 빈 vs 자동 등록 빈

- 언제 수동 등록 빈을 사용하고, 언제 자동 등록 빈을 사용하는 것이 옳을까?
    - 애플리케이션은 크게 업무 로직과 기술 지원 로직으로 나눌 수 있다.
        - 업무 로직 빈: 웹을 지원하는 컨트롤러, 핵심 비즈니스 로직이 있는 서비스, 데이터 계층의 로직을 처리하는 레포지토리 등이 모두 업무 로직. 보통 비즈니스 요구사항을 개발할 때 추가되거나 변경.
        - 기술 지원 빈: 기술적인 문제나 공통 관심사(AOP)를 처리할 때 주로 사용. 데이터베이스 연결이나, 공통로그 처리 처럼 업무 로직을 지원하기 위한 하부 기술이나 공통 기술들.
    - 업무 로직은 양도 엄청 많고, 컨트롤러, 서비스, 레포지토리처럼 어느정도 유사한 패턴이 있음. 이런 경우 자동 기능을 적극 사용하는 것이 좋음. 보통 문제가 발생해도 어떤 곳에서 문제가 발생했는지 명확하게 파악하기 쉽다.
    - 기술 지원 로직은 업무 로직과 비교해서 그 수가 매우 적고, 보통 애플리케이션 전반에 걸쳐서 광범위하게 영향을 미침. 그리고 업무 로직은 문제가 발생했을 때 어디가 문제인지 명확하게 잘 드러나지만, 기술 지원 로직은 적용이 잘 되고 있는지 아닌지 조차 파악하기 어려운 경우가 많다. 그래서 이런 기술 지원 로직들은 가급적 수동 빈 등록을 사용해서 명확하게 드러내는 것이 좋다.
    - **업무 로직은 자동 빈 등록, 애플리케이션에 광범위하게 영향을 미치는 기술 지원 로직은 수동 빈으로 등록해서 딱 설정 정보에 바로 나타나게 하는 것이 유지보수에 좋다.**

- 다형성을 적극 활용할 때 수동 등록으로 한 곳에 모아서 설정 정보에서 관리하는 것이 좋을 *수도* 있음

```java
@Configuration
public class DiscountPolicyConfig {
    @Bean
    public DiscountPolicy rateDiscountPolicy() {
        return new RateDiscountPolicy();
    }

    @Bean
    public DiscountPolicy fixDiscountPolicy() {
        return new FixDiscountPolicy();
    }
}
```
- 사실 답은 없음 ㅎㅎ, 핵심은 딱 보고 확실하게 이해가 되냐가 중요한 것

> 정리
- 편리한 자동 기능을 기본으로 사용하자
- 직접 등록하는 기술 지원 객체는 수동 등록
- 다형성을 적극 활용하는 비즈니스 로직은 수동 등록을 고민해보자